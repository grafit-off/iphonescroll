{"version":3,"sources":["main.js"],"names":["disableScroll","pagePosition","window","scrollY","document","querySelector","style","scrollBehavior","body","classList","add","dataset","position","top","enableScroll","parseInt","remove","scroll","left","removeAttribute","isiPhone","navigator","userAgent","match","isiPad","isiPod","modalButtons","querySelectorAll","lockPadding","modalCloseButtons","timeout","currentCloseBtn","bodyWasNotLock","previousActiveElement","unlock","length","console","log","index","modalCurrentButton","addEventListener","e","modalName","path","curentModal","getElementById","modalOpen","setTimeout","forEach","el","focus","preventDefault","modalClose","closest","activeElement","modalActive","bodyLock","target","doUnlock","bodyUnlock","lockPaddingValue","innerWidth","offsetWidth","paddingRight","contains","which","Element","prototype","css","node","this","matches","parentElement","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","headerBurger","headerMenu","headerLink","md3","matchMedia","burgerToggle","toggle","scrollLock_BtnListener","item","smoothScroll","linkNav","i","w","pageYOffset","hash","href","replace","t","getBoundingClientRect","start","requestAnimationFrame","step","time","progress","r","Math","max","min","scrollTo","location"],"mappings":"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","file":"main.js","sourcesContent":["// Includes\n\n// IOS Scroll Fix\nlet disableScroll = () => {\n\tlet pagePosition = window.scrollY;\n\tdocument.querySelector('html').style.scrollBehavior = 'auto';\n\tdocument.body.classList.add('ios-lock');\n\tdocument.body.dataset.position = pagePosition;\n\tdocument.body.style.top = -pagePosition + 'px';\n}\n\nlet enableScroll = () => {\n\tlet pagePosition = parseInt(document.body.dataset.position, 10);\n\tdocument.body.style.top = 'auto';\n\tdocument.body.classList.remove('ios-lock');\n\twindow.scroll({ top: pagePosition, left: 0 });\n\tdocument.querySelector('html').removeAttribute('style');\n\tdocument.body.removeAttribute('data-position');\n}\n// Is Iphone\nconst isiPhone = (navigator.userAgent.match(/iPhone/i) != null);\nconst isiPad = (navigator.userAgent.match(/iPad/i) != null);\nconst isiPod = (navigator.userAgent.match(/iPod/i) != null);\n// const body = document.querySelector('body')\r\nconst modalButtons = document.querySelectorAll('.modal-btn');\r\nconst lockPadding = document.querySelectorAll('.lock-padding');\r\n\r\nconst modalCloseButtons = document.querySelectorAll('.close-modal');\r\nconst timeout = 800;\r\nlet currentCloseBtn;\r\nlet unlock = true;\r\nlet bodyWasNotLock;\r\nif (lockPadding.length == 0) {\r\n\tconsole.log('@MODALS: \"Не забудьте добавить класс \"lock-padding\" фиксированным элементам!\"')\r\n}\r\nif (modalButtons.length > 0) {\r\n\tfor (let index = 0; index < modalButtons.length; index++) {\r\n\t\tconst modalCurrentButton = modalButtons[index];\r\n\t\tmodalCurrentButton.addEventListener(\"click\", function (e) {\r\n\t\t\tconst modalName = modalCurrentButton.dataset.path;\r\n\t\t\tconst curentModal = document.getElementById(modalName);\r\n\t\t\tif (curentModal != null) {\r\n\t\t\t\tconsole.log(`Открыто модальное окно: ${modalName}`);\r\n\t\t\t\tmodalOpen(curentModal);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tmodalCloseButtons.forEach((el) => {\r\n\t\t\t\t\t\tel.focus()\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 100)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(`Такого модального окна нету! ${curentModal}`);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nif (modalCloseButtons.length > 0) {\r\n\tfor (let index = 0; index < modalCloseButtons.length; index++) {\r\n\t\tconst el = modalCloseButtons[index];\r\n\t\tcurrentCloseBtn = el;\r\n\t\tel.addEventListener('click', function (e) {\r\n\t\t\tmodalClose(el.closest('.modal'));\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\t}\r\n}\r\nlet previousActiveElement;\r\nfunction modalOpen(curentModal) {\r\n\tif (curentModal && unlock) {\r\n\t\tpreviousActiveElement = document.activeElement;\r\n\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\tif (modalActive) {\r\n\t\t\tmodalClose(modalActive, false);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tbodyLock();\r\n\t\t}\r\n\t\tcurentModal.classList.add('open');\r\n\t\tcurentModal.addEventListener(\"mousedown\", function (e) {\r\n\t\t\tif (!e.target.closest('.modal__content')) {\r\n\t\t\t\tmodalClose(e.target.closest('.modal'));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\nfunction modalClose(modalActive, doUnlock = true) {\r\n\tif (unlock) {\r\n\t\tmodalActive.classList.remove('open');\r\n\t\tif (doUnlock) {\r\n\t\t\tbodyUnlock();\r\n\t\t}\r\n\t}\r\n\tsetTimeout(function () {\r\n\t\tpreviousActiveElement.focus();\r\n\t}, timeout);\r\n\r\n}\r\n\r\nfunction bodyLock() {\r\n\tconst lockPaddingValue = window.innerWidth - body.offsetWidth + 'px';\r\n\tif (lockPadding.length > 0) {\r\n\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\tconst el = lockPadding[index];\r\n\t\t\tel.style.paddingRight = lockPaddingValue;\r\n\t\t}\r\n\t}\r\n\r\n\tbody.style.paddingRight = lockPaddingValue;\r\n\tif (!body.classList.contains('lock')) {\r\n\t\tbodyWasNotLock = true;\r\n\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\tdisableScroll();\r\n\t\t} else {\r\n\t\t\tbody.classList.add('lock');\r\n\t\t}\r\n\t} else {\r\n\t\tbodyWasNotLock = false;\r\n\t}\r\n\r\n\tunlock = false;\r\n\tsetTimeout(function () {\r\n\t\tunlock = true;\r\n\t}, timeout);\r\n}\r\nfunction bodyUnlock() {\r\n\tsetTimeout(function () {\r\n\t\tif (lockPadding.length > 0) {\r\n\t\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\t\tconst el = lockPadding[index];\r\n\t\t\t\tel.style.paddingRight = '0px';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbody.style.paddingRight = '0px';\r\n\t\tif (bodyWasNotLock == true) {\r\n\r\n\t\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\t\tenableScroll()\r\n\t\t\t} else {\r\n\t\t\t\tbody.classList.remove('lock');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}, timeout);\r\n}\r\n\r\ndocument.addEventListener('keydown', function (e) {\r\n\tif (document.querySelector('.modal.open')) {\r\n\t\tif (e.which === 27) {\r\n\t\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\t\tmodalClose(modalActive);\r\n\t\t}\r\n\t}\r\n});\r\n(function () {\r\n\tif (!Element.prototype.closest) {\r\n\t\tElement.prototype.closest = function (css) {\r\n\t\t\tvar node = this;\r\n\t\t\twhile (node) {\r\n\t\t\t\tif (node.matches(css)) return node;\r\n\t\t\t\telse node = node.parentElement;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t}\r\n})();\r\n(function () {\r\n\tif (!Element.prototype.matches) {\r\n\t\tElement.prototype.matches = Element.prototype.matchesSelector ||\r\n\t\t\tElement.prototype.webkitMatchesSelector ||\r\n\t\t\tElement.prototype.mozMatchesSelector ||\r\n\t\t\tElement.prototype.msMatchesSelector;\r\n\t}\r\n})();\n\n// Burger Menu\nconst headerBurger = document.querySelector('.header__burger');\nconst headerMenu = document.querySelector('.header__menu');\nconst headerLink = document.querySelectorAll('.header__link');\nconst md3 = window.matchMedia(\"(max-width: 767px)\");\nconst body = document.querySelector('body')\n\n\nfunction burgerToggle() {\n\theaderBurger.classList.toggle('active');\n\theaderMenu.classList.toggle('active');\n\tbody.classList.toggle('lock');\n}\n\nheaderBurger.addEventListener('click', () => {\n\tburgerToggle()\n})\n\n\nlet scrollLock_BtnListener = (item) => {\n\titem.addEventListener('click', (e) => {\n\t\titem.classList.toggle('scroll')\n\t\tif (item.classList.contains('scroll')) {\n\t\t\tdisableScroll();\n\t\t} else {\n\t\t\tenableScroll();\n\t\t}\n\t});\n}\n\nif (isiPhone || isiPad || isiPod) {\n\tscrollLock_BtnListener(headerBurger);\n}\n\nif (md3.matches) {\n\theaderLink.forEach((el) => {\n\t\tel.addEventListener('click', () => {\n\t\t\tif (isiPhone || isiPad || isiPod) {\n\t\t\t\tenableScroll();\n\t\t\t\theaderBurger.classList.toggle('scroll');\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tburgerToggle();\n\t\t\t}, 100)\n\t\t})\n\t})\n}\n// -- //\n// Smooth scroll to link for IPhones\nlet smoothScroll = () => {\n\tlet linkNav = document.querySelectorAll('[href^=\"#\"]'),\n\t\tV = 0.2;  // скорость, может иметь дробное значение через точку (чем меньше значение - тем больше скорость)\n\tfor (let i = 0; i < linkNav.length; i++) {\n\t\tlinkNav[i].addEventListener('click', function (e) {\n\t\t\te.preventDefault();\n\t\t\tlet w = window.pageYOffset,\n\t\t\t\thash = this.href.replace(/[^#]*(.*)/, '$1');  // !Убрать пробел у доллара и еденицы!!!\n\t\t\tt = document.querySelector(hash).getBoundingClientRect().top,\n\t\t\t\tstart = null;\n\t\t\trequestAnimationFrame(step);\n\t\t\tfunction step(time) {\n\t\t\t\tif (start === null) start = time;\n\t\t\t\tlet progress = time - start,\n\t\t\t\t\tr = (t < 0 ? Math.max(w - progress / V, w + t) : Math.min(w + progress / V, w + t));\n\t\t\t\twindow.scrollTo(0, r);\n\t\t\t\tif (r != w + t) {\n\t\t\t\t\trequestAnimationFrame(step)\n\t\t\t\t} else {\n\t\t\t\t\tlocation.hash = hash\n\t\t\t\t}\n\t\t\t}\n\t\t}, false);\n\t}\n}\nif (isiPhone || isiPad || isiPod) {\n\tsmoothScroll();\n}\n\n// -- //\n"]}